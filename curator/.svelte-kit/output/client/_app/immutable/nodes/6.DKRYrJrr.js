import{c as E,a as g,f as y,t as Q}from"../chunks/D6MYdS9h.js";import{p as pe,f as u,a as ce,s,g as r,h as $,e as c,b,n as P,c as V,r as W}from"../chunks/CqKpht16.js";import{a as ge}from"../chunks/HfSINFkk.js";import{c as d,i as L}from"../chunks/cli-iPJS.js";import{p as ve}from"../chunks/CB1YDqdC.js";import{b as le,D as X,E as ue,c as _e,d as me,e as be}from"../chunks/D-VGJNw3.js";import{N as fe,c as he}from"../chunks/ZeYipwfv.js";import{T as Oe,a as we,c as Ne,d as Te,e as ke,f as $e,g as ye,h as xe,i as De,b as Se}from"../chunks/IOBaASFu.js";import{T as Ee}from"../chunks/CGZBc23e.js";var Pe=y('<!> <div class="divider divider-horizontal"></div>',1),Le=y('<!> <!> <div class="grow"></div> <!> <!> <!> <!> <!> <!> <!> <!>',1),Me=y('<!> <div class="h-[calc(100vh-60px)]"><!></div> <!> <!> <!> <!> <!>',1),Re=y('<div class="h-[calc(100vh-60px)]"><!></div>');function Ge(Y,Z){pe(Z,!0);const o=new fe(ve.params.slug),ee=he();let p=$(()=>o.note),f=b(!1),h=b(!1),O=b(!1),w=b(!1),N=b(!1);const te=o.getNote();o.updateLastOpened();var M=E(),ae=u(M);ge(ae,()=>te,x=>{var l=Re(),T=V(l);be(T),W(l),g(x,l)},x=>{var l=Me(),T=u(l);d(T,()=>Se,(n,t)=>{t(n,{children:(v,U)=>{var k=Le(),j=u(k);d(j,()=>Oe,(a,e)=>{e(a,{})});var q=s(j,2);d(q,()=>we,(a,e)=>{e(a,{})});var A=s(q,4);{var ne=a=>{var e=E(),i=u(e);d(i,()=>Ee,(_,m)=>{m(_,{get tags(){return r(p).expand.tags}})}),g(a,e)};L(A,a=>{var e;(e=r(p).expand)!=null&&e.tags&&a(ne)})}var B=s(A,2);d(B,()=>Ne,(a,e)=>{e(a,{get isOpen(){return r(h)},set isOpen(i){c(h,i,!0)}})});var F=s(B,2);{var se=a=>{var e=E(),i=u(e);d(i,()=>xe,(_,m)=>{m(_,{get notebook(){return r(p).expand.notebook},get isOpen(){return r(O)},set isOpen(S){c(O,S,!0)}})}),g(a,e)};L(F,a=>{var e;(e=r(p).expand)!=null&&e.notebook&&a(se)})}var G=s(F,2);{var ie=a=>{var e=Pe(),i=u(e);d(i,()=>De,(_,m)=>{m(_,{get rating(){return r(p).rating},action:async S=>{await o.changeRating(S)}})}),P(2),g(a,e)};L(G,a=>{ee.isMobile||a(ie)})}var H=s(G,2);d(H,()=>Te,(a,e)=>{e(a,{get isOpen(){return r(w)},set isOpen(i){c(w,i,!0)}})});var J=s(H,2);d(J,()=>ke,(a,e)=>{e(a,{get noteStatus(){return o.note.status},archive:async()=>{await o.archiveNote(),window.history.back()},unarchive:async()=>{await o.restoreNote(),window.history.back()}})});var K=s(J,2);d(K,()=>$e,(a,e)=>{e(a,{get noteStatus(){return o.note.status},restore:async()=>await o.restoreNote(),get isOpen(){return r(f)},set isOpen(i){c(f,i,!0)},get isPermaDeleteNoteOpen(){return r(N)},set isPermaDeleteNoteOpen(i){c(N,i,!0)}})});var de=s(K,2);d(de,()=>ye,(a,e)=>{e(a,{get note(){return r(p)}})}),g(v,k)},$$slots:{default:!0}})});var D=s(T,2),re=V(D);le(re,{get noteState(){return o}}),W(D);var R=s(D,2);X(R,{name:"Note",action:async()=>{await o.softDeleteNote(),window.history.back()},get isOpen(){return r(f)},set isOpen(n){c(f,n,!0)},children:(n,t)=>{P();var v=Q("this note");g(n,v)},$$slots:{default:!0}});var z=s(R,2);X(z,{name:"Note",action:async()=>{await o.permaDeleteNote(),window.history.back()},get isOpen(){return r(N)},set isOpen(n){c(N,n,!0)},children:(n,t)=>{P();var v=Q("this note permanently");g(n,v)},$$slots:{default:!0}});var C=s(z,2);{let n=$(()=>{var t;return(t=r(p).expand)==null?void 0:t.tags});ue(C,{get currentTags(){return r(n)},add:async t=>await o.addTag(t),remove:async t=>await o.removeTag(t),get isOpen(){return r(h)},set isOpen(t){c(h,t,!0)}})}var I=s(C,2);{let n=$(()=>{var t;return(t=r(p).expand)==null?void 0:t.notebook.id});_e(I,{get currentNotebookID(){return r(n)},action:async t=>{await o.changeNotebook(t)},get isOpen(){return r(O)},set isOpen(t){c(O,t,!0)}})}var oe=s(I,2);{let n=$(()=>{var t;return(t=r(p))==null?void 0:t.thumbnail});me(oe,{get note(){return r(p)},get thumbURL(){return r(n)},action:async(t,v,U,k)=>{await o.changeTitle(t),await o.changeDescription(v),await o.changeSources(U),await o.changeThumbnail(k),await o.getNote()},get isOpen(){return r(w)},set isOpen(t){c(w,t,!0)}})}g(x,l)}),g(Y,M),ce()}export{Ge as component};
